<div class="wide-header" ng-controller="accessController">
    <div class="content" id="header">

        <div class="menu-panel">
            <div class="logo header-item">
                <a href="/ar/reader/books" alt="К списку книг"></a>
            </div>

            <div class="header-item">
                <a href="/ar/reader/articles">{{resources.Reader_Articles}}</a>
            </div>

            <div class="header-item" ng-if="user">
                <a href="/ar/writer/books">{{resources.Writer_Projects}}</a>
            </div>
            <!--<a href="/ar/writer/generalDefinition">{{resources.Help}}</a>-->
            <div class="header-item" ng-if="user && user.IsAdmin" style="display: none;">
                <a href="/ar/admin/books">{{resources.Admin_Books}}</a>
            </div>
            <div class="header-item" ng-if="user && user.IsAdmin">
                <a href="/ar/admin/questionnaires">{{resources.Admin_Questionnaires}}</a>
            </div>
            <div class="header-item" ng-if="user && user.IsAdmin">
                <a href="/ar/admin/questionnaire-results">{{resources.Admin_Questionnaire_Result}}</a>
            </div>


            <div class="header-item" ng-if="!user">
                <a href="#" ng-click="openRegistration()">{{resources.Registration}}</a>
            </div>


            <div class="header-item" ng-if="user && user.IsAdmin">
                <a href="ar/reader/landing">Landing</a>
            </div>
            

            <div class="header-item alert">
                Дизайн проекта находиться в разработке. Финальная версия ожидается в начале 2019 года
            </div>
        </div>

        <div class="login-panel">
            <!--<div class="header-item" ng-if="user">
                <a href="/ar/reader/profile/{{user.Id}}">Профиль</a>
            </div>-->
            <!--<div class="header-item ">
                <input type="text" placeholder="Искать..." />
            </div>-->
            <!-- <div class="header-item">
                <span class="icon" ng-class="{'bell-active': active, 'bell': !active}" ng-click="active = !active"></span>
            </div> -->
            <div class="header-item" ng-if="!user">
                <a href="#" ng-click="openLogin()">{{resources.Login}}</a>
            </div>
            <div class="header-item" ng-if="user">
                {{::user.Name}} <a href="#" ng-click="exit()">{{resources.Exit}}</a>
            </div>
            <div class="header-item avatar-container">
                <a href="/ar/reader/profile/{{user.Id}}"><img ng-src="{{user.AvatarUrl}}" ng-show="user" title="{{user.Name}}" class="user-avatar" /></a>
            </div>
        </div>

        <div class="fullscreen-div" ng-if="popupOpen.main" ng-click="close()">
            <div class="login-block" ng-click="idle($event)">
                <p class="right">
                    <a href="#" ng-click="close()"><span class="icon close"></span></a>
                </p>
                <div class="content" ng-if="popupOpen.isLogin">
                    <div class="error">
                        {{error}}
                    </div>
                    <div class="row">
                        <input placeholder='{{resources.Login}}/{{resources.Email}}' type="text"
                               ng-model="loginObj.Name" ng-keypress="passwordKeyPress($event)" ng-disabled="waiting" />
                    </div>
                    <div class="row">
                        <input placeholder='{{resources.Password}}' type="password"
                               ng-model="loginObj.Password" ng-keypress="passwordKeyPress($event)" ng-disabled="waiting" />
                    </div>
                    <div>
                        <span ng-class="{'button-medium-blue': loginObj.Name && loginObj.Password, 'button-medium-gray': !loginObj.Name || !loginObj.Password}"
                              ng-click="login()">
                            {{resources.Login}}
                        </span>
                    </div>
                </div>

                <div class="content" ng-if="popupOpen.isRegistration">
                    <div class="error">
                        {{error}}
                    </div>
                    <div class="row">
                        <input placeholder='{{resources.Login}}' type="text"
                               ng-model="loginObj.Name" ng-keypress="passwordKeyPress($event)" ng-disabled="waiting" />
                    </div>
                    <div class="row">
                        <input placeholder='{{resources.Email}}' type="text"
                               ng-model="loginObj.Email" ng-keypress="passwordKeyPress($event)" ng-disabled="waiting" />
                    </div>
                    <div class="row">
                        <input placeholder='{{resources.Password}}' type="password"
                               ng-model="loginObj.Password" ng-keypress="passwordKeyPress($event)" ng-disabled="waiting" />
                    </div>
                    <div>
                        <span ng-class="{'button-medium-blue': isUserValid(), 'button-medium-gray': !isUserValid()}"
                              ng-click="register()">{{resources.Registration}}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
