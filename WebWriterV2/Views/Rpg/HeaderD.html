<div class="wide-header" ng-controller="accessController"
     ng-class="{travel: route.isTravel, isUp: route.isUp}"
     ng-mousemove="mousemove($event)">

    <div class="content" id="header">
        <div class="menu-panel">
            <div class="logo header-item">
                <a href="/ar/reader/books" alt="К списку книг"><img src="/Content/icon/naractivity.png" title="Интерактивная книга" alt="Интерактивная книга"></a>
            </div>

            <div class="header-item" ng-if="user && user.IsAdmin">
                <a href="/ar/reader/articles">{{resources.Reader_Articles}}</a>
            </div>

            <div class="header-item" ng-if="user">
                <a href="/ar/writer/books">{{resources.Writer_Projects}}</a>
            </div>
            <!--<a href="/ar/writer/generalDefinition">{{resources.Help}}</a>-->
            <div class="header-item" ng-if="user && user.IsAdmin">
                <a href="/ar/admin/books">{{resources.Admin_Books}}</a>
            </div>
            <div class="header-item" ng-if="user && user.IsAdmin">
                <a href="/ar/admin/questionnaires">{{resources.Admin_Questionnaires}}</a>
            </div>
            <div class="header-item" ng-if="user && user.IsAdmin">
                <a href="/ar/admin/questionnaire-results">{{resources.Admin_Questionnaire_Result}}</a>
            </div>


            <div class="header-item" ng-if="!user">
                <a href="#" ng-click="openRegistration()">{{resources.Registration}}</a>
            </div>


            <div class="header-item" ng-if="user && user.IsAdmin">
                <a href="ar/reader/landing">Landing</a>
            </div>


            <div class="header-item alert">
                Дизайн проекта находится в разработке. Финальная версия ожидается в начале 2019 года
            </div>
        </div>

        <div class="login-panel">
            <!--<div class="header-item" ng-if="user">
                <a href="/ar/reader/profile/{{user.Id}}">Профиль</a>
            </div>-->
            <!--<div class="header-item ">
                <input type="text" placeholder="Искать..." />
            </div>-->
            <!-- <div class="header-item">
                <span class="icon" ng-class="{'bell-active': active, 'bell': !active}" ng-click="active = !active"></span>
            </div> -->
            <div class="header-item" ng-if="!user">
                <a href="#" ng-click="openLogin()">{{resources.Login}}</a>
            </div>
            <div class="header-item" ng-if="user">
                {{::user.Name}} <a href="#" ng-click="exit()">{{resources.Exit}}</a>
            </div>
            <div class="header-item avatar-container">
                <a href="/ar/reader/profile/{{user.Id}}"><img ng-src="{{user.AvatarUrl}}" ng-show="user" title="{{user.Name}}" class="user-avatar" /></a>
            </div>
        </div>

        <div class="fullscreen-div" ng-if="popupOpen.main" ng-click="close()">
            <div class="login-block" ng-click="idle($event)" style="display: none;">
                <p class="right">
                    <a href="#" ng-click="close()"><span class="icon close"></span></a>
                </p>
                <div class="content" ng-if="popupOpen.isLogin">
                    <div class="error">
                        {{error}}
                    </div>
                    <div class="row">
                        <input placeholder='{{resources.Email}}' type="text"
                               ng-model="loginObj.Email" ng-keypress="passwordKeyPress($event)" ng-disabled="waiting" />
                    </div>
                    <div class="row">
                        <input placeholder='{{resources.Password}}' type="password"
                               ng-model="loginObj.Password" ng-keypress="passwordKeyPress($event)" ng-disabled="waiting" />
                    </div>
                    <div>
                        <span ng-class="{'button-medium-blue': loginObj.Email && loginObj.Password, 'button-medium-gray': !loginObj.Email || !loginObj.Password}"
                              ng-click="login()">
                            {{resources.Login}}
                        </span>
                    </div>
                </div>

                <div class="content" ng-if="popupOpen.isRegistration">
                    <div class="error">
                        {{error}}
                    </div>
                    <!--<div class="row">
                        <input placeholder='{{resources.Login}}' type="text"
                               ng-model="loginObj.Name" ng-keypress="passwordKeyPress($event)" ng-disabled="waiting" />
                    </div>-->
                    <div class="row">
                        <input placeholder='{{resources.Email}}' type="text"
                               ng-model="loginObj.Email" ng-keypress="passwordKeyPress($event)" ng-disabled="waiting" />
                    </div>
                    <div class="row">
                        <input placeholder='{{resources.Password}}' type="password"
                               ng-model="loginObj.Password" ng-keypress="passwordKeyPress($event)" ng-disabled="waiting" />
                    </div>
                    <div>
                        <span ng-class="{'button-medium-blue': isUserValid(), 'button-medium-gray': !isUserValid()}"
                              ng-click="register()">{{resources.Registration}}</span>
                    </div>
                </div>
            </div>

            <div class="registrationForm" ng-click="idle($event)">
                <div class="signInUp">
                    <p class="tabName" ng-class="{'active': popupOpen.isLogin}" ng-click="openLogin()">{{resources.Login}}</p>
                    <p class="rectangle"></p>
                    <p class="tabName" ng-class="{'active': popupOpen.isRegistration}" ng-click="openRegistration()">{{resources.Registration}}</p>
                </div>
                <span class="error">{{error}}</span>
                <input type="text" placeholder="{{resources.Email}}" ng-model="loginObj.Email" 
                       ng-keypress="passwordKeyPress($event)" ng-disabled="waiting" >
                <input type="password"  placeholder='{{resources.Password}}' ng-model="loginObj.Password" 
                       ng-keypress="passwordKeyPress($event)" ng-disabled="waiting">
                <div class="agreeGroup">
                    <div>
                        <span class="checkbox">
                            <input type="checkbox" id="keepMeSigned">
                            <label for="keepMeSigned" class="fake-checkbox"></label>
                            <label for="keepMeSigned">Keep me signed in</label>
                        </span>
                    </div>
                    <div>
                        <span><a href="#">Forgot password?</a></span>
                    </div>
                </div>
                <div>
                    <button class="btn" ng-if="popupOpen.isLogin" ng-click="login()">{{resources.Login}}</button>
                    <button class="btn" ng-if="popupOpen.isRegistration" ng-click="register()">{{resources.Registration}}</button>
                </div>
            </div>
        </div>
    </div>
</div>
